// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model WeaponProfile {
  id       String @id @default(cuid())
  name     String @unique @default("")
  range    String @default("")
  type     String
  shots    String @default("")
  AP       String @default("")
  dmg      String @default("")
  strength String @default("")
  notes    String @default("")
  units    Unit[] @relation("Unit_weapons")
}

model UnitStat {
  id    String @id @default(cuid())
  name  String @unique @default("")
  M     String @default("")
  WS    String @default("")
  BS    String @default("")
  W     String @default("")
  S     String @default("")
  T     String @default("")
  A     String @default("")
  Sv    String @default("")
  Ld    String @default("")
  units Unit[] @relation("Unit_stats")
}

model Unit {
  id        String          @id @default(cuid())
  name      String          @unique @default("")
  details   String          @default("")
  stats     UnitStat?       @relation("Unit_stats", fields: [statsId], references: [id])
  statsId   String?         @map("stats")
  weapons   WeaponProfile[] @relation("Unit_weapons")
  keywords  Tag[]           @relation("Unit_keywords")
  points    Int
  abilities Rule[]          @relation("Unit_abilities")
  role      UnitRoleType
  armies    ArmyList[]      @relation("ArmyList_units")

  @@index([statsId])
}

model Rule {
  id                      String     @id @default(cuid())
  name                    String     @unique @default("")
  displayName             String     @default("")
  hideName                Boolean    @default(false)
  details                 String     @default("")
  from_Unit_abilities     Unit[]     @relation("Unit_abilities")
  from_ArmyList_armyRules ArmyList[] @relation("ArmyList_armyRules")
}

model Tag {
  id                 String @id @default(cuid())
  name               String @unique @default("")
  from_Unit_keywords Unit[] @relation("Unit_keywords")
}

model User {
  id       String @id @default(cuid())
  name     String @unique @default("")
  email    String @unique @default("")
  password String
}

model Stratagem {
  id      String     @id @default(cuid())
  name    String     @unique @default("")
  armies  ArmyList[] @relation("ArmyList_stratagems")
  details String     @default("")
  CP      String     @default("")
}

model ArmyList {
  id          String      @id @default(cuid())
  name        String      @default("")
  description String      @default("")
  notes       String      @default("")
  stratagems  Stratagem[] @relation("ArmyList_stratagems")
  units       Unit[]      @relation("ArmyList_units")
  armyRules   Rule[]      @relation("ArmyList_armyRules")
}

enum UnitRoleType {
  HQ
  Flyer
  Elite
  Troop
  Drone
  Transport
  Heavy
  Fast
  misc
}